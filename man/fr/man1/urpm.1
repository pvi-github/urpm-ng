.\" Page de manuel pour urpm
.TH URPM 1 "Janvier 2025" "urpm-ng" "Commandes utilisateur"
.SH NOM
urpm \- gestionnaire de paquets moderne pour Mageia Linux
.SH SYNOPSIS
.B urpm
.RI [ options ]
.I commande
.RI [ arguments ]
.SH DESCRIPTION
.B urpm
est un gestionnaire de paquets moderne pour Mageia Linux, offrant une
resolution rapide des dependances via libsolv, le partage de paquets
en P2P entre machines du reseau local, et une interface en ligne de
commande intuitive.
.PP
Il est concu comme une reecriture complete de la suite d'outils urpmi.
.SH OPTIONS
.TP
.BR \-h ", " \-\-help
Affiche l'aide et quitte.
.TP
.BR \-V ", " \-\-version
Affiche le numero de version et quitte.
.TP
.BR \-v ", " \-\-verbose
Mode verbeux.
.TP
.BR \-q ", " \-\-quiet
Mode silencieux.
.TP
.B \-\-nocolor
Desactive les couleurs.
.SH COMMANDES
.SS Installation et suppression de paquets
.TP
.B i|install \fIpaquet\fR ...
Installe un ou plusieurs paquets.
.RS
.TP
.BR \-y ", " \-\-auto
Pas de confirmation.
.TP
.B \-\-download\-only
Telecharge sans installer.
.TP
.B \-\-without\-recommends
N'installe pas les paquets recommandes.
.TP
.B \-\-with\-suggests
Installe aussi les paquets suggeres.
.TP
.B \-\-only\-peers
Telecharge uniquement depuis les pairs LAN, pas de miroirs upstream.
.TP
.BR \-b ", " \-\-builddeps " " \fI[spec]\fR
Installe les dependances de build depuis un fichier spec ou SRPM. Auto-detection si non specifie.
.TP
.B \-\-sync
Attend la fin de tous les scriptlets et triggers avant de retourner.
.RE
.TP
.B e|erase \fIpaquet\fR ...
Supprime un ou plusieurs paquets. Alias : \fBremove\fR.
.RS
.TP
.BR \-y ", " \-\-auto
Pas de confirmation.
.TP
.B \-\-auto\-orphans
Supprime aussi les dependances orphelines.
.RE
.TP
.B autoremove
Supprime les paquets orphelins, anciens noyaux ou dependances cassees.
.SS Mises a jour
.TP
.B up|update \fR[\fIpaquet\fR ...]
Met a jour diverses choses... media, paquets...
.RS
.B Cette commande sera modifiée...préférez u|upgrade pour les paquets.
.RE
.TP
.B u|upgrade \fR[\fIpaquet\fR ...]
Met a niveau les paquets (tout le systeme si aucun n'est specifie).
.RS
.TP
.B \-\-only\-peers
Telecharge uniquement depuis les pairs LAN, pas de miroirs upstream.
.RE
.SS Informations sur les paquets
.TP
.B q|query \fImotif\fR
Recherche des paquets par nom ou description. Alias : \fBs\fR, \fBsearch\fR.
.TP
.B show \fIpaquet\fR
Affiche les details d'un paquet.
.TP
.B list \fR[\fImotif\fR]
Liste les paquets. Utilisez \fB\-\-installed\fR pour les paquets installes.
.TP
.B provides \fIpaquet\fR
Affiche les capacites fournies par un paquet.
.TP
.B whatprovides \fIcapacite\fR
Trouve les paquets fournissant une capacite.
.TP
.B find \fIfichier\fR
Trouve le paquet contenant un fichier.
.RS
.B (Non implémenté, ça va venir).
.RE
.TP
.B depends \fIpaquet\fR
Affiche les dependances d'un paquet.
.TP
.B rdepends \fIpaquet\fR
Affiche les dependances inverses.
.TP
.B why \fIpaquet\fR
Explique pourquoi un paquet est installe.
.SS Gestion des medias et serveurs
.TP
.B media \fR[\fIsous-commande\fR]
Gere les sources de medias. Sans sous-commande, liste les medias.
.RS
.TP
.B list
Liste les medias configures.
.TP
.B add \fInom\fR \fIurl\fR
Ajoute un nouveau media.
.TP
.B remove \fInom\fR
Supprime un media.
.TP
.B enable \fInom\fR
Active un media.
.TP
.B disable \fInom\fR
Desactive un media.
.TP
.B update \fR[\fInom\fR]
Met a jour les metadonnees (en parallele).
.TP
.B import
Importe la configuration depuis urpmi.
.TP
.B link \fInom\fR \fI+serveur\fR|\fI-serveur\fR ...
Associe ou dissocie des serveurs a un media. Utilisez +serveur pour ajouter, -serveur pour retirer.
Utilisez +all/-all pour ajouter/retirer tous les serveurs. Ne lie que les serveurs qui ont le media disponible.
.TP
.B set \fInom\fR \fR[\fIoptions\fR]
Modifie les parametres d'un media.
.RS
.TP
.B \-\-shared \fIyes\fR|\fIno\fR
Active/desactive le partage de ce media avec les pairs.
.TP
.B \-\-replication \fIpolicy\fR
Politique de replication : none, on_demand, seed.
.TP
.B \-\-seeds \fIsections\fR
Sections rpmsrate pour la replication seed (separees par virgules), ex: INSTALL,CAT_PLASMA5,CAT_GNOME.
.TP
.B \-\-quota \fItaille\fR
Quota par media (ex: 5G, 500M).
.TP
.B \-\-retention \fIjours\fR
Jours de conservation des paquets en cache.
.TP
.B \-\-priority \fIN\fR
Priorite du media (plus haut = prefere).
.RE
.TP
.B autoconfig \fB\-\-release\fR \fIversion\fR
Ajoute automatiquement les medias officiels Mageia pour une release. Alias : \fBauto\fR, \fBac\fR.
.RS
.TP
.BR \-r ", " \-\-release " " \fIversion\fR
Version Mageia (ex: 10, cauldron). Requis.
.TP
.B \-\-arch \fIarch\fR
Architecture cible (defaut : hote).
.TP
.BR \-n ", " \-\-dry\-run
Affiche ce qui serait ajoute sans modifier.
.TP
.B \-\-no\-nonfree
Ignore les medias nonfree.
.TP
.B \-\-no\-tainted
Ignore les medias tainted.
.RE
.RE
.TP
.B server \fR[\fIsous-commande\fR]
Gere les serveurs de telechargement. Sans sous-commande, liste les serveurs.
.RS
.TP
.B list
.RS
Liste les serveurs configures.
.sp
.BR \-\-all
Liste tous les serveurs y compris ceux désactivés.
.RE
.TP
.B add \fInom\fR \fIurl\fR
Ajoute un nouveau serveur.
.TP
.B remove \fInom\fR
Supprime un serveur.
.TP
.B enable \fInom\fR
Active un serveur.
.TP
.B disable \fInom\fR
Desactive un serveur.
.TP
.B priority \fInom\fR \fIN\fR
Definit la priorite (plus bas = prefere).
.TP
.B autoconfig
Configure automatiquement les serveurs en testant les miroirs.
.RE
.SS P2P et cache
.TP
.B peer \fR[\fIsous-commande\fR]
Gere les pairs P2P. Sans sous-commande, liste les pairs.
.RS
.TP
.B list
Liste les pairs decouverts et les statistiques.
.TP
.B blacklist \fIhote\fR
Bloque un pair.
.TP
.B unblacklist \fIhote\fR
Debloque un pair.
.TP
.B clean \fIhote\fR
Supprime les RPM telecharges depuis un pair.
.RE
.TP
.B cache \fIsous-commande\fR
Gere le cache de paquets.
.RS
.TP
.B clean
Supprime les RPM orphelins du cache.
.TP
.B info
Affiche les statistiques du cache.
.RE
.SS Historique et retour arriere
.TP
.B history \fR[\fIN\fR]
Affiche l'historique des transactions. Par defaut : 10 dernieres.
.TP
.B rollback \fIspec\fR
Annule des transactions.
.RS
.TP
.B rollback 5
Annule les 5 dernieres transactions.
.TP
.B rollback to 42
Revient a la transaction #42.
.TP
.B rollback to 26/11/2025
Revient a une date specifique.
.RE
.TP
.B undo \fR[\fIN\fR]
Annule la derniere transaction, ou la transaction #N.
.SS Configuration
.TP
.B config \fIsous-commande\fR
Gere la configuration d'urpm.
.TP
.B key \fIsous-commande\fR
Gere les cles GPG pour la verification des paquets.
.TP
.B mark \fIpaquet\fR manual|auto
Marque les paquets comme installes manuellement ou automatiquement.
.TP
.B hold \fR[\fIpaquet\fR ...] [\fB\-r\fR \fIraison\fR]
Verrouille des paquets pour empecher les mises a jour et le remplacement par obsoletes.
Sans arguments, liste les paquets verrouilles.
.RS
.TP
.BR \-r ", " \-\-reason " " \fIraison\fR
Enregistre une raison pour le verrouillage.
.TP
.BR \-l ", " \-\-list
Liste les paquets verrouilles.
.RE
.TP
.B unhold \fIpaquet\fR ...
Supprime le verrouillage des paquets, permettant leur mise a jour ou remplacement.
.SS Initialisation et telechargement
.TP
.B init \fR[\fB\-\-release\fR \fIversion\fR] [\fB\-\-mirrorlist\fR \fIurl\fR]
Initialise urpm avec les medias Mageia standard. Teste les miroirs et configure les meilleurs.
.RS
.TP
.BR \-r ", " \-\-release " " \fIversion\fR
Version Mageia (ex: 10, cauldron).
.TP
.B \-\-urpm\-root " " \fIchemin\fR
Initialise dans un repertoire chroot.
.RE
.TP
.B download \fIpaquet\fR ...
Telecharge les paquets dans le cache sans les installer.
.RS
.TP
.BR \-r ", " \-\-release " " \fIversion\fR
Version cible pour les telechargements multi-versions.
.TP
.BR \-b ", " \-\-builddeps " " \fI[spec]\fR
Telecharge les dependances de build depuis un fichier spec.
.TP
.B \-\-only\-peers
Telecharge uniquement depuis les pairs LAN, pas de miroirs upstream.
.RE
.SS Systeme de build en conteneurs
.TP
.B mkimage \fB\-\-release\fR \fIversion\fR \fB\-\-tag\fR \fItag\fR
Cree une image Docker/Podman minimale pour les builds RPM.
.RS
.TP
.BR \-r ", " \-\-release " " \fIversion\fR
Version Mageia (ex: 10, cauldron).
.TP
.BR \-t ", " \-\-tag " " \fItag\fR
Tag de l'image (ex: mageia:10-build).
.TP
.B \-\-arch " " \fIarch\fR
Architecture cible (defaut: hote).
.TP
.BR \-p ", " \-\-packages " " \fIliste\fR
Paquets supplementaires (separes par des virgules).
.TP
.B \-\-runtime " " docker|podman
Runtime conteneur (defaut: auto-detection).
.TP
.B \-\-keep\-chroot
Conserver le chroot temporaire apres la creation de l'image.
.TP
.BR \-w ", " \-\-workdir " " \fIchemin\fR
Repertoire de travail pour le chroot (defaut: /tmp).
.RE
.TP
.B build \fB\-\-image\fR \fItag\fR \fIsource\fR ...
Construit des paquets RPM dans des conteneurs isoles.
.RS
.TP
.BR \-i ", " \-\-image " " \fItag\fR
Image Docker/Podman a utiliser.
.TP
.BR \-o ", " \-\-output " " \fIrep\fR
Repertoire de sortie (defaut: ./build-output ou workspace/{RPMS,SRPMS}).
.TP
.B \-\-runtime " " docker|podman
Runtime conteneur (defaut: auto-detection).
.TP
.BR \-j ", " \-\-parallel " " \fIN\fR
Nombre de builds paralleles (defaut: 1).
.TP
.B \-\-keep\-container
Conserver le conteneur apres le build (pour debug).
.PP
Les sources peuvent etre des fichiers .src.rpm ou .spec. Pour les fichiers .spec,
les sources sont automatiquement copiees depuis le repertoire SOURCES/ (supporte
les arborescences workspace/SPECS/ et workspace/SOURCES/). Les resultats vont
dans workspace/RPMS/ et workspace/SRPMS/ pour les builds spec.
.RE
.SH FICHIERS
.TP
.I /var/lib/urpm/
Repertoire de la base de donnees et du cache.
.TP
.I /var/lib/urpm/packages.db
Base de donnees SQLite pour les metadonnees et l'historique.
.TP
.I /var/lib/urpm/medias/
Cache des paquets telecharges.
.TP
.I /etc/bash_completion.d/urpm
Script de completion Bash.
.SH EXEMPLES
.TP
Installer un paquet :
.B urpm i firefox
.TP
Rechercher des paquets :
.B urpm q lecteur video
.TP
Mettre a jour tous les paquets :
.B urpm u
.TP
Supprimer un paquet sans demander confirmation :
.B urpm e \-y gimp
.TP
Expliquer pourquoi un paquet est installe :
.B urpm why libpng
.TP
Mettre a jour les metadonnees :
.B urpm m u
.SH VOIR AUSSI
.BR urpmd (8),
.BR rpm (8),
.SH BOGUES
Signaler les bogues sur https://github.com/pvi-github/urpm-ng/issues
.SH AUTEURS
Pascal Vilarem (Maât) et contributeurs.
.SH COPYRIGHT
Copyright (C) 2024-2025 Pascal Vilarem (Maât).
Sous licence GPLv3+.
